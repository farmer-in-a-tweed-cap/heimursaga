<%- include('includes/header') %>
<title>Heimursaga | Account Type</title>

<%- include('includes/standard-meta') %>

</head>

<body data-theme="default" data-layout="fluid" data-sidebar-position="left" data-sidebar-behavior="sticky">
	<div class="main d-flex justify-content-center">
		<main class="content d-flex">
			<div class="container d-flex flex-column">
				<div class="row">
					<div class="col-xl-10 col-xl-8 mx-auto d-table h-100">
						<div class="d-table-cell align-middle">

							<div class="text-center mb-4 me-4">
								<img src="./img/brands/Heimursaga Logo & Slogan white-bg.svg" width="266" height="99.75" alt="Heimursaga">
							</div>


								<div class="col-md-10 col-xl-8 mt-3 mx-auto">
									<h1 class="text-center">Explorer Account Selection</h1>
					
									<div class="row justify-content-center mt-3 mb-2">
										<div class="col-auto">
											<nav class="nav btn-group">
												<a href="#monthly" class="btn btn-outline-primary active" data-bs-toggle="tab">Monthly</a>
												<a href="#annual" class="btn btn-outline-primary" data-bs-toggle="tab">Annual</a>
											</nav>
										</div>
									</div>
					
									<div class="tab-content">
										<div class="tab-pane fade show active" id="monthly">
											<div class="row py-4">
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="mb-3 text-primary">EXPLORER</h5>
																<span style="font-size: x-large;">Free</br>Forever</span>
															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
															</ul>
															<div class="mt-auto">
																<form action="/select-type/<%= user.username %>" method="POST" >
																	<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																	<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																	<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																	<input name="type" id="type" value="explorer" hidden>
																	<button type="submit" class="btn btn-primary">Select</button>
																</form>
															</div>
														</div>
													</div>
												</div>
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="mb-4 text-primary">EXPLORER PRO</h5>
																<span class="display-4">$12</span>
																<span>/mo</span>
															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
																<li class="mb-2">
																	Journal metrics
																</li>
																<li class="mb-2">
																	Journey Mode
																</li>
																<li class="mb-2">
																	Private messaging
																</li>
																<li class="mb-2">
																	Personal website and instagram links
																</li>
															</ul>
															<div class="mt-auto">
																<div class="text-center text-primary">In development - Coming October 2021!</div>

																<!-- <button type="button" class="btn btn-primary mt-1" data-bs-toggle="modal" data-bs-target="#centeredModalPrimary">
																	Join Waitlist
																</button> -->
																<button class="btn btn-lg btn-primary" id="explorer-pro">Join Waitlist</button>

																	<div class="modal fade" id="centeredModalPrimary" tabindex="-1" role="dialog" aria-hidden="true">
																		<div class="modal-dialog modal-dialog-centered" role="document">
																			<div class="modal-content">
																				<div class="modal-header">
																					<h5 class="modal-title">Explorer Pro Waitlist</h5>
																					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
																				</div>
																				<div class="modal-body m-3">
																					<p class="mb-0">Your account will default to the free "Explorer" account, and you will be notified by email when Explorer Pro is available for upgrade!</p>
																				</div>
																				<div class="modal-footer">
																					<form action="/select-type/<%= user.username %>" method="POST" >
																						<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																						<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																						<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																						<input name="type" id="type" value="explorerpro-monthly" hidden>
																						<button type="submit" class="btn btn-primary">Sign Me Up</button>
																					</form>																				
																				</div>
																			</div>
																		</div>
																	</div>
															</div>
														</div>
													</div>
												</div>
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="text-primary">EXPLORER PRO + EXPLORERS FUND</h5>
																<span class="display-4">$23</span>
																<span>/mo</span>
															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
																<li class="mb-2">
																	Journal metrics
																</li>
																<li class="mb-2">
																	Journey Mode
																</li>
																<li class="mb-2">
																	Private messaging
																</li>
																<li class="mb-2">
																	Personal website and instagram links
																</li>
																<li class="mb-2">
																	Explorers Fund
																</li>
															</ul>
															<div class="mt-auto">
																<div class="text-center text-primary">In development - Coming December 2021!</div>

																<!-- <button type="button" class="btn btn-primary mt-1" data-bs-toggle="modal" data-bs-target="#centeredModalPrimary0">
																	Join Waitlist
																</button> -->
																<button class="btn btn-lg btn-primary" id="explorer-pro-plus">Join Waitlist</button>

																	<div class="modal fade" id="centeredModalPrimary0" tabindex="-1" role="dialog" aria-hidden="true">
																		<div class="modal-dialog modal-dialog-centered" role="document">
																			<div class="modal-content">
																				<div class="modal-header">
																					<h5 class="modal-title">Explorer Pro + Explorers Fund Waitlist</h5>
																					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
																				</div>
																				<div class="modal-body m-3">
																					<p class="mb-0">Your account will default to the free "Explorer" account, and you will be notified by email when Explorer Pro + Explorers Fund is available for upgrade!</p>
																				</div>
																				<div class="modal-footer">
																					<form action="/select-type/<%= user.username %>" method="POST" >
																						<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																						<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																						<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																						<input name="type" id="type" value="explorerproplus-monthly" hidden>
																						<button type="submit" class="btn btn-primary">Sign Me Up</button>
																					</form>																				
																				</div>
																			</div>
																		</div>
																	</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="tab-pane fade" id="annual">
											<div class="row py-4">
												<span class="text-center text-primary mb-2">Save 20% by choosing an annual subscription</span>
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="mb-3 text-primary">EXPLORER</h5>
																<span style="font-size: x-large;">Free</br>Forever</span>															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
															</ul>
															<div class="mt-auto">
																<form action="/select-type/<%= user.username %>" method="POST" >
																	<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																	<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																	<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																	<input name="type" id="type" value="explorer" hidden>
																	<button type="submit" class="btn btn-primary">Select</button>
																</form>
															</div>
														</div>
													</div>
												</div>
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="mb-4 text-primary">EXPLORER PRO</h5>
																<span class="display-4">$115</span>
																<span>/yr</span>
															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
																<li class="mb-2">
																	Journal metrics
																</li>
																<li class="mb-2">
																	Journey Mode
																</li>
																<li class="mb-2">
																	Private messaging
																</li>
																<li class="mb-2">
																	Personal website and instagram links
																</li>
															</ul>
															<div class="mt-auto">
																<div class="text-center text-primary">In development - Coming October 2021!</div>

																<!-- <button type="button" class="btn btn-primary mt-1" data-bs-toggle="modal" data-bs-target="#centeredModalPrimary1">
																	Join Waitlist
																</button> -->
																<button class="btn btn-lg btn-primary" id="annual-explorer-pro">Join Waitlist</button>

																	<div class="modal fade" id="centeredModalPrimary1" tabindex="-1" role="dialog" aria-hidden="true">
																		<div class="modal-dialog modal-dialog-centered" role="document">
																			<div class="modal-content">
																				<div class="modal-header">
																					<h5 class="modal-title">Explorer Pro Waitlist</h5>
																					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
																				</div>
																				<div class="modal-body m-3">
																					<p class="mb-0">Your account will default to the free "Explorer" account, and you will be notified by email when Explorer Pro is available for upgrade!</p>
																				</div>
																				<div class="modal-footer">
																					<form action="/select-type/<%= user.username %>" method="POST" >
																						<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																						<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																						<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																						<input name="type" id="type" value="explorerpro-annual" hidden>
																						<button type="submit" class="btn btn-primary">Sign Me Up</button>
																					</form>																				
																				</div>
																			</div>
																		</div>
																	</div>
															</div>
														</div>
													</div>
												</div>
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="text-primary">EXPLORER PRO + EXPLORERS FUND</h5>
																<span class="display-4">$220</span>
																<span>/yr</span>
															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
																<li class="mb-2">
																	Journal metrics
																</li>
																<li class="mb-2">
																	Journey Mode
																</li>
																<li class="mb-2">
																	Private messaging
																</li>
																<li class="mb-2">
																	Personal website and instagram links
																</li>
																<li class="mb-2">
																	Explorers Fund
																</li>
															</ul>
															<div class="mt-auto">
																<div class="text-center text-primary">In development - Coming December 2021!</div>

																<!-- <button type="button" class="btn btn-primary mt-1" data-bs-toggle="modal" data-bs-target="#centeredModalPrimary2">
																	Join Waitlist
																</button> -->
																<button class="btn btn-lg btn-primary" id="annual-explorer-pro-plus">Join Waitlist</button>

																	<div class="modal fade" id="centeredModalPrimary2" tabindex="-1" role="dialog" aria-hidden="true">
																		<div class="modal-dialog modal-dialog-centered" role="document">
																			<div class="modal-content">
																				<div class="modal-header">
																					<h5 class="modal-title">Explorer Pro + Explorers Fund Waitlist</h5>
																					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
																				</div>
																				<div class="modal-body m-3">
																					<p class="mb-0">Your account will default to the free "Explorer" account, and you will be notified by email when Explorer Pro + Explorers Fund is available for upgrade!</p>
																				</div>
																				<div class="modal-footer">
																					<form action="/select-type/<%= user.username %>" method="POST" >
																						<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																						<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																						<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																						<input name="type" id="type" value="explorerproplus-annual" hidden>
																						<button type="submit" class="btn btn-primary">Sign Me Up</button>
																					</form>																				
																				</div>
																			</div>
																		</div>
																	</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
					
									<hr />
					
									<div class="text-center my-4">
										<h2>Frequently asked questions</h2>
									</div>
									<div class="row">
										<div class="card-columns">
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">Do I need a credit card to sign up?</h5>
													<p class="mb-0">No! Paid subscriptions will be offered with a 30-day free trial. You will be asked to input your billing information at the end of your free trial.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">When will the Explorer Pro subscriptions be available?</h5>
													<p class="mb-0">Explorer Pro features are currently in development and are scheduled for release at the end of October (Explorer Pro) and December (Explorer Pro + Explorers Fund). You will be notified by email upon official release!</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">Do you offer a free trial?</h5>
													<p class="mb-0">Yes! All account subscriptions offer a 30-day trial. You may cancel at any time.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">What if I decide to cancel my subscription?</h5>
													<p class="mb-0">Your subscription can be cancelled at any time without penalty. Just send us an email at admin@heimursaga.com.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">What is Journey Mode?</h5>
													<p class="mb-0">Journey Mode enables chronological grouping of journal entries. Your followers will be able to visit your Journal, select a particular "Journey" and see only entries for that journey with a "journey path" line drawn between them.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">How does Private Messaging work?</h5>
													<p class="mb-0">Accounts with an Explorer Pro subscription will be able to send private messages to other Explorer Pro accounts within the web app.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">What is Explorers Fund?</h5>
													<p class="mb-0">The Explorers Fund is Heimursaga's fundraising feature. A subscription to the Explorers Fund adds a "Fund This Explorer" button to your Journal page and every entry you post. This button will enable your followers to donate funds in support of your explorations!</p>
												</div>
											</div>
										</div>
										</div>
									</div>
								</div>

					</div>		
				</div>
			</div>
		</main>

	<script src="js/app.js"></script>

	<script type="text/javascript" src="https://js.stripe.com/v3/"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const publishableKey = 'pk_test_51K2JRAFXr1UXQNSZbMzM0eTcrirEsCbBDJ8USeCrgPwWVt1zVGev7yGReOQoQACURXpdS2Cn8p7mLpemLqMbVrpL00ZBgmobdf'
			const stripe = Stripe(publishableKey);
			let explorerProPlus = document.getElementById('explorer-pro-plus');
			let explorerPro = document.getElementById('explorer-pro');

			// let annualExplorerPro = document.getElementById('annual-explorer-pro')
			// let annualExplorerProPlus = document.getElementById('annual-explorer-pro-plus')

			let manageSubscription = document.getElementById('manage_billing');


			//monthly
			if (explorerProPlus) {
				explorerProPlus.addEventListener('click', function () {

					fetch(`/subscribe/pro_plus`, {
						method: 'GET',
						headers: {
							'Content-Type': 'application/json'
						},
					})
						.then(async (result) => {
							const response = await result.json();
							return response
						})
						.then((response) => {
							if (response?.sessionId)
								stripe.redirectToCheckout({ sessionId: response.sessionId })
						})
				})
			}

			if (explorerPro) {
				explorerPro.addEventListener('click', function () {

					fetch(`/subscribe/pro`, {
						method: 'GET',
						headers: {
							'Content-Type': 'application/json'
						},
					})
						.then(async (result) => {
							const response = await result.json();
							return response
						})
						.then((response) => {
							if (response?.sessionId)
								stripe.redirectToCheckout({ sessionId: response.sessionId })
						})

				})
			}

			//annual
			// if(annualExplorerPro){
			//     annualExplorerPro.addEventListener('click', function() {

			//     fetch(`/subscribe/annual_pro`, {
			//     method: 'GET',
			//     headers: {
			//         'Content-Type': 'application/json'
			//     },
			//     })
			//     .then(async (result) => {
			//         const response =  await result.json();
			//         return response
			//     })
			//     .then((response) => {
			//         if(response?.sessionId)
			//         stripe.redirectToCheckout({ sessionId: response.sessionId })
			//     })

			//     })  
			// }  

			// if(annualExplorerProPlus){
			//     annualExplorerProPlus.addEventListener('click', function() {

			//     fetch(`/subscribe/annual_pro_plus`, {
			//     method: 'GET',
			//     headers: {
			//         'Content-Type': 'application/json'
			//     },
			//     })
			//     .then(async (result) => {
			//         const response =  await result.json();
			//         return response
			//     })
			//     .then((response) => {
			//         if(response?.sessionId)
			//         stripe.redirectToCheckout({ sessionId: response.sessionId })
			//     })

			//     })  
			// }  

			//manage Subscription link //todo: provide email and customer(billingId)
			// if (manageSubscription) {
			// 	manageSubscription.addEventListener('click', function () {

			// 		const requestOptions = {
			// 			method: 'GET',
			// 			headers: {
			// 				'Content-Type': 'application/json'
			// 			},
			// 		}

			// 		fetch(`/billing/${email}/${customer}`, requestOptions)
			// 			.then(async (response) => await response.json())
			// 			.then((result) => window.location.replace(result.url))
			// 			.catch((error) => console.log('error', error))

			// 	})
			// }
		
		});

	</script>
</body>

</html>