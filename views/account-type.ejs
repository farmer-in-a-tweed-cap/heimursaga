<%- include('includes/header') %>
<title>Heimursaga | Account Type</title>

<%- include('includes/standard-meta') %>

</head>

<body data-theme="default" data-layout="fluid" data-sidebar-position="left" data-sidebar-behavior="sticky">
	<div class="main d-flex justify-content-center" style="background-color: #212121 !important;">
		<main class="content d-flex">
			<div class="container d-flex flex-column">
				<div class="row">
					<div class="col-sm-10 col-md-6 col-lg-4 mx-auto">

							<div class="text-center me-4">
								<img src="../img/brands/Heimursaga Logo & Slogan Brown.svg" width="100%" height="100%" alt="Heimursaga">
							</div>
							
					</div>
						

							<div class="col-xl-10 col-xl-8 mx-auto mt-1 d-table">

								<div class="d-table-cell align-middle">


								<div class="col-md-10 col-xl-8 mx-auto">
									<h2 class="text-center mt-4" style="color: #adb5bd;">Explorer Account Selection</h2>
					

									<div class="tab-content">
										<div class="tab-pane fade show active" id="monthly">
											<div class="row py-4 justify-content-center">
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h3 class="text-primary mb-4">EXPLORER</h3><br>
																<span style="font-size: xx-large;">Free</span>
															</div>
															<ul class="list-unstyled mt-4">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow and sponsor explorers
																</li>
															</ul>
															<div class="mt-auto">
																<form action="/select-type/<%= user.username %>" method="POST" >
																	<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																	<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																	<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																	<input name="type" id="type" value="explorer" hidden>
																	<button type="submit" class="btn btn-lg btn-primary">Select</button>
																</form>
															</div>
														</div>
													</div>
												</div>
												<div class="col-sm-4 mb-3 mb-md-0 ">
													<div class="card text-center h-100 d-flex flex-row">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h3 class="text-primary">EXPLORER PRO</h3>
																<div class="d-flex flex-row gap-2  justify-content-center">
																	<button id="monthlyBtn" class="btn btn-lg btn-outline-primary btn-sm active">monthly</button>
																	<button id="yearlyBtn" class="btn btn-lg btn-outline-primary btn-sm">yearly</button>
																</div>
																<div class="m-2">
																	<div id="monthly-detail">
																		<span class="display-4">$12</span>
																		<span>/mo</span>
																	</div>
																	<div id="yearly-detail" style="display: none;">
																		<span class="display-4">$115</span>
																		<span>/yr</span>
																	</div>
																	</div>
																	</div>
															<ul class="list-unstyled mt-4">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
																<li class="mb-2">
																	Journal metrics
																</li>
																<li class="mb-2">
																	Journey Mode
																</li>
																<li class="mb-2">
																	Private messaging
																</li>
																<li class="mb-2">
																	Personal website and instagram links
																</li>
																<li class="mb-2">
																	Explorers Fund
																</li>
															</ul>
															<div class="mt-auto">
																<button class="btn btn-lg btn-primary" id="explorer">Select</button>
																</div>
																</div>
																</div>
																</div>
											</div>
										</div>
										<!-- <div class="tab-pane fade" id="annual">
											<div class="row py-4">
												<span class="text-center text-primary mb-2">Save 20% by choosing an annual subscription</span>
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="mb-3 text-primary">EXPLORER</h5>
																<span style="font-size: x-large;">Free</br>Forever</span>															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
															</ul>
															<div class="mt-auto">
																<form action="/select-type/<%= user.username %>" method="POST" >
																	<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																	<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																	<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																	<input name="type" id="type" value="explorer" hidden>
																	<button type="submit" class="btn btn-primary">Select</button>
																</form>
															</div>
														</div>
													</div>
												</div>
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="mb-4 text-primary">EXPLORER PRO</h5>
																<span class="display-4">$115</span>
																<span>/yr</span>
															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
																<li class="mb-2">
																	Journal metrics
																</li>
																<li class="mb-2">
																	Journey Mode
																</li>
																<li class="mb-2">
																	Private messaging
																</li>
																<li class="mb-2">
																	Personal website and instagram links
																</li>
															</ul>
															<div class="mt-auto">
																<div class="text-center text-primary">In development - Coming October 2021!</div>


																<button class="btn btn-lg btn-primary" id="annual-explorer-pro">Join Waitlist</button>

																	<div class="modal fade" id="centeredModalPrimary1" tabindex="-1" role="dialog" aria-hidden="true">
																		<div class="modal-dialog modal-dialog-centered" role="document">
																			<div class="modal-content">
																				<div class="modal-header">
																					<h5 class="modal-title">Explorer Pro Waitlist</h5>
																					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
																				</div>
																				<div class="modal-body m-3">
																					<p class="mb-0">Your account will default to the free "Explorer" account, and you will be notified by email when Explorer Pro is available for upgrade!</p>
																				</div>
																				<div class="modal-footer">
																					<form action="/select-type/<%= user.username %>" method="POST" >
																						<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																						<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																						<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																						<input name="type" id="type" value="explorerpro-annual" hidden>
																						<button type="submit" class="btn btn-primary">Sign Me Up</button>
																					</form>																				
																				</div>
																			</div>
																		</div>
																	</div>
															</div>
														</div>
													</div>
												</div>
												<div class="col-sm-4 mb-3 mb-md-0">
													<div class="card text-center h-100">
														<div class="card-body d-flex flex-column">
															<div class="mb-4" style="height: 110px;">
																<h5 class="text-primary">EXPLORER PRO + EXPLORERS FUND</h5>
																<span class="display-4">$220</span>
																<span>/yr</span>
															</div>
															<ul class="list-unstyled">
																<li class="mb-2">
																	Post journal entries
																</li>
																<li class="mb-2">
																	Like journal entries
																</li>
																<li class="mb-2">
																	Follow explorers
																</li>
																<li class="mb-2">
																	Journal metrics
																</li>
																<li class="mb-2">
																	Journey Mode
																</li>
																<li class="mb-2">
																	Private messaging
																</li>
																<li class="mb-2">
																	Personal website and instagram links
																</li>
																<li class="mb-2">
																	Explorers Fund
																</li>
															</ul>
															<div class="mt-auto">
																<div class="text-center text-primary">In development - Coming December 2021!</div>

																<button class="btn btn-lg btn-primary" id="annual-explorer-pro-plus">Join Waitlist</button>

																	<div class="modal fade" id="centeredModalPrimary2" tabindex="-1" role="dialog" aria-hidden="true">
																		<div class="modal-dialog modal-dialog-centered" role="document">
																			<div class="modal-content">
																				<div class="modal-header">
																					<h5 class="modal-title">Explorer Pro + Explorers Fund Waitlist</h5>
																					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
																				</div>
																				<div class="modal-body m-3">
																					<p class="mb-0">Your account will default to the free "Explorer" account, and you will be notified by email when Explorer Pro + Explorers Fund is available for upgrade!</p>
																				</div>
																				<div class="modal-footer">
																					<form action="/select-type/<%= user.username %>" method="POST" >
																						<input type="hidden" name="_csrf" value="<%= csrfToken %>">
																						<input type="text" class="form-control" id="username-register" name="username" maxlength="30" value="<%= user.username %>"hidden>
																						<input type="email" class="form-control" id="email-register" name="email" value="<%= email %>" hidden>
																						<input name="type" id="type" value="explorerproplus-annual" hidden>
																						<button type="submit" class="btn btn-primary">Sign Me Up</button>
																					</form>																				
																				</div>
																			</div>
																		</div>
																	</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div> -->
									
									</div>
					
									<hr />
					
									<div class="text-center my-4" >
										<h2 style="color: #adb5bd;">Frequently asked questions</h2>
									</div>
									<div class="row">
										<div class="card-columns">
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">Do I need a credit card to sign up for Explorer Pro?</h5>
													<p class="mb-0">Yes, you will be asked to input your billing information, but you will not be charged until the end of your free trial period.</p>
												</div>
											</div>
										</div>

										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">Do you offer a free trial?</h5>
													<p class="mb-0">Yes! Explorer Pro account subscriptions offer a 30-day trial. You may cancel at any time.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">What if I decide to cancel my subscription?</h5>
													<p class="mb-0">Your subscription can be cancelled at any time without penalty. Just send us an email at admin@heimursaga.com.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">What is Journey Mode?</h5>
													<p class="mb-0">Journey Mode enables chronological grouping of journal entries. Your followers will be able to visit your Journal, select a particular "Journey" and see only entries for that journey with a "journey path" line drawn between them. Additionally, Journey Mode enables waypoint creation.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">How does Private Messaging work?</h5>
													<p class="mb-0">Accounts with an Explorer Pro subscription will be able to send private messages to other Explorer Pro accounts within the web app.</p>
												</div>
											</div>
										</div>
										<div>
											<div class="card">
												<div class="card-body">
													<h5 class="h6 card-title">What is Explorers Fund?</h5>
													<p class="mb-0">The Explorers Fund is Heimursaga's fundraising feature. A subscription to Explorer Pro adds a "Fund This Explorer" button to your Journal page and every entry you post. This button will enable your followers to donate or sponsor you in support of your explorations!</p>
												</div>
											</div>
										</div>
										</div>
									</div>
								</div>

					</div>		
				</div>
			</div>
		</main>

	<script src="js/app.js"></script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const monthlyBtn = document.getElementById("monthlyBtn");
			const yearlyBtn = document.getElementById("yearlyBtn");
			const monthlyContent = document.getElementById("monthly-detail");
			const yearlyContent = document.getElementById("yearly-detail");
			if (yearlyContent)
				yearlyContent.style.display = "none";

			if (monthlyBtn)
				monthlyBtn.addEventListener("click", function () {
					monthlyContent.style.display = "block";
					yearlyContent.style.display = "none";
					monthlyBtn.classList.add("active");
					yearlyBtn.classList.remove("active");
				});

			if (yearlyBtn)
				yearlyBtn.addEventListener("click", function () {
					monthlyContent.style.display = "none";
					yearlyContent.style.display = "block";
					monthlyBtn.classList.remove("active");
					yearlyBtn.classList.add("active");
				});
		});

	</script>

	<script type="text/javascript" src="https://js.stripe.com/v3/"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const publishableKey = `<%- stripePubKey %>`;
			const stripe = Stripe(publishableKey);

			// selected subscription
			const monthlyBtn = document.getElementById("monthlyBtn");
			const yearlyBtn = document.getElementById("yearlyBtn");
			let monthlySubsActive = true;
			if (yearlyBtn)
				yearlyBtn.addEventListener('click', () => {
					monthlySubsActive = false;
				})

			if (monthlyBtn)
				monthlyBtn.addEventListener('click', () => {
					monthlySubsActive = true
				})

			let explorerSubs= document.getElementById('explorer');

			let manageSubscription = document.getElementById('manage_billing');

			//annual + monthly
			if (explorerSubs) {
				explorerSubs.addEventListener('click', function () {
					if (monthlySubsActive) {
						fetch(`/subscribe/monthly_exp`, {
							method: 'GET',
							headers: {
								'Content-Type': 'application/json'
							},
						})
							.then(async (result) => {
								const response = await result.json();
								return response
							})
							.then((response) => {
								if (response?.sessionId)
									stripe.redirectToCheckout({ sessionId: response.sessionId })
							})
					}
					else {
						fetch(`/subscribe/yearly_exp`, {
							method: 'GET',
							headers: {
								'Content-Type': 'application/json'
							},
						})
							.then(async (result) => {
								const response = await result.json();
								return response
							})
							.then((response) => {
								if (response?.sessionId)
									stripe.redirectToCheckout({ sessionId: response.sessionId })
							})

					}

				})
			}
		});

	</script>
</body>

</html>